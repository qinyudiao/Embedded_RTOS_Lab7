\hypertarget{diskio_8h}{}\section{inc/diskio.h File Reference}
\label{diskio_8h}\index{inc/diskio.\+h@{inc/diskio.\+h}}


Low level disk interface modlue include file (C)ChaN, 2014 converted to T\+M4\+C123 Jonathan Valvano, January 13, 2015.  


{\ttfamily \#include \char`\"{}integer.\+h\char`\"{}}\\*
Include dependency graph for diskio.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=146pt]{diskio_8h__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries \+\_\+\+U\+S\+E\+\_\+\+W\+R\+I\+TE}~1  /$\ast$ 1\+: Enable \hyperlink{diskio_8h_ac03220b2c8a090b4f76eb2c9407b84fb}{disk\+\_\+write}() function $\ast$/\hypertarget{diskio_8h_a1dd0d2b46dce637878416d489d2ddde2}{}\label{diskio_8h_a1dd0d2b46dce637878416d489d2ddde2}

\item 
\#define {\bfseries \+\_\+\+U\+S\+E\+\_\+\+I\+O\+C\+TL}~1  /$\ast$ 1\+: Enable \hyperlink{diskio_8h_ac822cf3c1768a2c35e4858cc99b8f53b}{disk\+\_\+ioctl}() fucntion $\ast$/\hypertarget{diskio_8h_afe6d1224687dede333375a2475c78ff6}{}\label{diskio_8h_afe6d1224687dede333375a2475c78ff6}

\item 
\#define {\bfseries S\+T\+A\+\_\+\+N\+O\+I\+N\+IT}~0x01  /$\ast$ Drive not initialized $\ast$/\hypertarget{diskio_8h_abd6503c70d862b979a3f7080a59e9acd}{}\label{diskio_8h_abd6503c70d862b979a3f7080a59e9acd}

\item 
\#define {\bfseries S\+T\+A\+\_\+\+N\+O\+D\+I\+SK}~0x02  /$\ast$ No medium in the drive $\ast$/\hypertarget{diskio_8h_aec625080763d6cf487e550a6c9a2dd19}{}\label{diskio_8h_aec625080763d6cf487e550a6c9a2dd19}

\item 
\#define {\bfseries S\+T\+A\+\_\+\+P\+R\+O\+T\+E\+CT}~0x04  /$\ast$ Write protected $\ast$/\hypertarget{diskio_8h_a9ec6dc5f6620a33fabe388d3a111ca8c}{}\label{diskio_8h_a9ec6dc5f6620a33fabe388d3a111ca8c}

\item 
\#define {\bfseries C\+T\+R\+L\+\_\+\+S\+Y\+NC}~0  /$\ast$ Complete pending write process (needed at \+\_\+\+F\+S\+\_\+\+R\+E\+A\+D\+O\+N\+LY == 0) $\ast$/\hypertarget{diskio_8h_a1b3c492f9aec325f0655941b75256f3c}{}\label{diskio_8h_a1b3c492f9aec325f0655941b75256f3c}

\item 
\#define {\bfseries G\+E\+T\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+C\+O\+U\+NT}~1  /$\ast$ Get media size (needed at \+\_\+\+U\+S\+E\+\_\+\+M\+K\+FS == 1) $\ast$/\hypertarget{diskio_8h_a570216006f6a8fc4e1698b1bbb2d1dde}{}\label{diskio_8h_a570216006f6a8fc4e1698b1bbb2d1dde}

\item 
\#define {\bfseries G\+E\+T\+\_\+\+S\+E\+C\+T\+O\+R\+\_\+\+S\+I\+ZE}~2  /$\ast$ Get sector size (needed at \+\_\+\+M\+A\+X\+\_\+\+SS != \+\_\+\+M\+I\+N\+\_\+\+SS) $\ast$/\hypertarget{diskio_8h_ac73b5cf2135cbd459d109b96c9aa346a}{}\label{diskio_8h_ac73b5cf2135cbd459d109b96c9aa346a}

\item 
\#define {\bfseries G\+E\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+I\+ZE}~3  /$\ast$ Get erase block size (needed at \+\_\+\+U\+S\+E\+\_\+\+M\+K\+FS == 1) $\ast$/\hypertarget{diskio_8h_aec3bb4dfe075d0ba2f3b07b300a95500}{}\label{diskio_8h_aec3bb4dfe075d0ba2f3b07b300a95500}

\item 
\#define {\bfseries C\+T\+R\+L\+\_\+\+T\+R\+IM}~4  /$\ast$ Inform device that the data on the block of sectors is no longer used (needed at \+\_\+\+U\+S\+E\+\_\+\+T\+R\+IM == 1) $\ast$/\hypertarget{diskio_8h_af09fd84bea8d4e889e272471f44d60d6}{}\label{diskio_8h_af09fd84bea8d4e889e272471f44d60d6}

\item 
\#define {\bfseries C\+T\+R\+L\+\_\+\+F\+O\+R\+M\+AT}~5  /$\ast$ Create physical format on the media $\ast$/\hypertarget{diskio_8h_add07021167069f5914211a2f8830fabb}{}\label{diskio_8h_add07021167069f5914211a2f8830fabb}

\item 
\#define {\bfseries C\+T\+R\+L\+\_\+\+P\+O\+W\+E\+R\+\_\+\+I\+D\+LE}~6  /$\ast$ Put the device idle state $\ast$/\hypertarget{diskio_8h_a69bec9079062f809c3586977b2dc5d79}{}\label{diskio_8h_a69bec9079062f809c3586977b2dc5d79}

\item 
\#define {\bfseries C\+T\+R\+L\+\_\+\+P\+O\+W\+E\+R\+\_\+\+O\+FF}~7  /$\ast$ Put the device off state $\ast$/\hypertarget{diskio_8h_aa1f5a55ea2a24d274c16e51c111c97d8}{}\label{diskio_8h_aa1f5a55ea2a24d274c16e51c111c97d8}

\item 
\#define {\bfseries C\+T\+R\+L\+\_\+\+L\+O\+CK}~8  /$\ast$ Lock media removal $\ast$/\hypertarget{diskio_8h_af40e5cf3000553a978ff6e30dae70858}{}\label{diskio_8h_af40e5cf3000553a978ff6e30dae70858}

\item 
\#define {\bfseries C\+T\+R\+L\+\_\+\+U\+N\+L\+O\+CK}~9  /$\ast$ Unlock media removal $\ast$/\hypertarget{diskio_8h_a5d06770de580667138ca6101ae5138ac}{}\label{diskio_8h_a5d06770de580667138ca6101ae5138ac}

\item 
\#define {\bfseries C\+T\+R\+L\+\_\+\+E\+J\+E\+CT}~10  /$\ast$ Eject media $\ast$/\hypertarget{diskio_8h_a5e40e16d2d7ce196858950f070b9ec03}{}\label{diskio_8h_a5e40e16d2d7ce196858950f070b9ec03}

\item 
\#define {\bfseries M\+M\+C\+\_\+\+G\+E\+T\+\_\+\+T\+Y\+PE}~50  /$\ast$ Get card type $\ast$/\hypertarget{diskio_8h_aba3a81a9a47c7d1bf3ac7749bc72dcfd}{}\label{diskio_8h_aba3a81a9a47c7d1bf3ac7749bc72dcfd}

\item 
\#define {\bfseries M\+M\+C\+\_\+\+G\+E\+T\+\_\+\+C\+SD}~51  /$\ast$ Get C\+SD $\ast$/\hypertarget{diskio_8h_ae3b858b81287929f7c7bea3b7aec3087}{}\label{diskio_8h_ae3b858b81287929f7c7bea3b7aec3087}

\item 
\#define {\bfseries M\+M\+C\+\_\+\+G\+E\+T\+\_\+\+C\+ID}~52  /$\ast$ Get C\+ID $\ast$/\hypertarget{diskio_8h_a17ad303dd18b19a4c90ab30a8a1c14c4}{}\label{diskio_8h_a17ad303dd18b19a4c90ab30a8a1c14c4}

\item 
\#define {\bfseries M\+M\+C\+\_\+\+G\+E\+T\+\_\+\+O\+CR}~53  /$\ast$ Get O\+CR $\ast$/\hypertarget{diskio_8h_aff118ba6bd7a9fe7699cee049cff5d6c}{}\label{diskio_8h_aff118ba6bd7a9fe7699cee049cff5d6c}

\item 
\#define {\bfseries M\+M\+C\+\_\+\+G\+E\+T\+\_\+\+S\+D\+S\+T\+AT}~54  /$\ast$ Get SD status $\ast$/\hypertarget{diskio_8h_a5cc43c8449b872e16ea5ab42592f793e}{}\label{diskio_8h_a5cc43c8449b872e16ea5ab42592f793e}

\item 
\#define {\bfseries A\+T\+A\+\_\+\+G\+E\+T\+\_\+\+R\+EV}~60  /$\ast$ Get F/W revision $\ast$/\hypertarget{diskio_8h_a23f5fff3341e98825ea1f7367fd09f1a}{}\label{diskio_8h_a23f5fff3341e98825ea1f7367fd09f1a}

\item 
\#define {\bfseries A\+T\+A\+\_\+\+G\+E\+T\+\_\+\+M\+O\+D\+EL}~61  /$\ast$ Get model name $\ast$/\hypertarget{diskio_8h_a31f556ab98ab80c39058b38d9283865d}{}\label{diskio_8h_a31f556ab98ab80c39058b38d9283865d}

\item 
\#define {\bfseries A\+T\+A\+\_\+\+G\+E\+T\+\_\+\+SN}~62  /$\ast$ Get serial number $\ast$/\hypertarget{diskio_8h_a469c4f989757ee1ee404134fea3c74ba}{}\label{diskio_8h_a469c4f989757ee1ee404134fea3c74ba}

\item 
\#define {\bfseries C\+T\+\_\+\+M\+MC}~0x01    /$\ast$ M\+M\+C ver 3 $\ast$/\hypertarget{diskio_8h_ac52ec66c278308382fdf7b2c57f0ad8c}{}\label{diskio_8h_ac52ec66c278308382fdf7b2c57f0ad8c}

\item 
\#define {\bfseries C\+T\+\_\+\+S\+D1}~0x02    /$\ast$ S\+D ver 1 $\ast$/\hypertarget{diskio_8h_ad1c9fc863ec15d3320b3850dc571626e}{}\label{diskio_8h_ad1c9fc863ec15d3320b3850dc571626e}

\item 
\#define {\bfseries C\+T\+\_\+\+S\+D2}~0x04    /$\ast$ S\+D ver 2 $\ast$/\hypertarget{diskio_8h_a0db1b71113e73184a5ba511e7020a922}{}\label{diskio_8h_a0db1b71113e73184a5ba511e7020a922}

\item 
\#define {\bfseries C\+T\+\_\+\+S\+DC}~(C\+T\+\_\+\+S\+D1$\vert$C\+T\+\_\+\+S\+D2)  /$\ast$ SD $\ast$/\hypertarget{diskio_8h_ae76d94ac83c68d1f025cb0bcad77fa5d}{}\label{diskio_8h_ae76d94ac83c68d1f025cb0bcad77fa5d}

\item 
\#define {\bfseries C\+T\+\_\+\+B\+L\+O\+CK}~0x08    /$\ast$ Block addressing $\ast$/\hypertarget{diskio_8h_a7d48ce54c27f4f60666309e8627fab47}{}\label{diskio_8h_a7d48ce54c27f4f60666309e8627fab47}

\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef B\+Y\+TE \hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{D\+S\+T\+A\+T\+US}\hypertarget{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{}\label{diskio_8h_adba6790898ce4029c20a34b898ce73c1}

\begin{DoxyCompactList}\small\item\em Status of Disk Functions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{D\+R\+E\+S\+U\+LT} \{ \\*
{\bfseries R\+E\+S\+\_\+\+OK} = 0, 
{\bfseries R\+E\+S\+\_\+\+E\+R\+R\+OR}, 
{\bfseries R\+E\+S\+\_\+\+W\+R\+P\+RT}, 
{\bfseries R\+E\+S\+\_\+\+N\+O\+T\+R\+DY}, 
\\*
{\bfseries R\+E\+S\+\_\+\+P\+A\+R\+E\+RR}
 \}\hypertarget{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{}\label{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}
\begin{DoxyCompactList}\small\item\em Results of Disk Functions. \end{DoxyCompactList}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{D\+S\+T\+A\+T\+US} \hyperlink{diskio_8h_a8e429a29bdbb73f5bc9e2ab2335a5112}{disk\+\_\+initialize} (B\+Y\+TE drv)
\begin{DoxyCompactList}\small\item\em Initialize disk drive. \end{DoxyCompactList}\item 
\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{D\+S\+T\+A\+T\+US} \hyperlink{diskio_8h_a21ad8e9a107ea2000705a3edfebaaa2d}{disk\+\_\+status} (B\+Y\+TE drv)
\begin{DoxyCompactList}\small\item\em Get disk status. \end{DoxyCompactList}\item 
\hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{D\+R\+E\+S\+U\+LT} \hyperlink{diskio_8h_a99e229031022d13ac273b6ea78af49cd}{disk\+\_\+read} (B\+Y\+TE drv, B\+Y\+TE $\ast$buff, D\+W\+O\+RD sector, U\+I\+NT count)
\begin{DoxyCompactList}\small\item\em Read sector(s) \end{DoxyCompactList}\item 
\hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{D\+R\+E\+S\+U\+LT} \hyperlink{diskio_8h_ac03220b2c8a090b4f76eb2c9407b84fb}{disk\+\_\+write} (B\+Y\+TE drv, const B\+Y\+TE $\ast$buff, D\+W\+O\+RD sector, U\+I\+NT count)
\begin{DoxyCompactList}\small\item\em Write sector(s) \end{DoxyCompactList}\item 
\hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{D\+R\+E\+S\+U\+LT} \hyperlink{diskio_8h_ac822cf3c1768a2c35e4858cc99b8f53b}{disk\+\_\+ioctl} (B\+Y\+TE drv, B\+Y\+TE cmd, void $\ast$buff)
\begin{DoxyCompactList}\small\item\em Miscellaneous drive controls. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Low level disk interface modlue include file (C)ChaN, 2014 converted to T\+M4\+C123 Jonathan Valvano, January 13, 2015. 



\subsection{Function Documentation}
\index{diskio.\+h@{diskio.\+h}!disk\+\_\+initialize@{disk\+\_\+initialize}}
\index{disk\+\_\+initialize@{disk\+\_\+initialize}!diskio.\+h@{diskio.\+h}}
\subsubsection[{\texorpdfstring{disk\+\_\+initialize(\+B\+Y\+T\+E drv)}{disk_initialize(BYTE drv)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf D\+S\+T\+A\+T\+US} disk\+\_\+initialize (
\begin{DoxyParamCaption}
\item[{B\+Y\+TE}]{drv}
\end{DoxyParamCaption}
)}\hypertarget{diskio_8h_a8e429a29bdbb73f5bc9e2ab2335a5112}{}\label{diskio_8h_a8e429a29bdbb73f5bc9e2ab2335a5112}


Initialize disk drive. 


\begin{DoxyParams}{Parameters}
{\em drv} & Physical drive number, which must be 0 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
status (see D\+S\+T\+A\+T\+US) 
\end{DoxyReturn}
\index{diskio.\+h@{diskio.\+h}!disk\+\_\+ioctl@{disk\+\_\+ioctl}}
\index{disk\+\_\+ioctl@{disk\+\_\+ioctl}!diskio.\+h@{diskio.\+h}}
\subsubsection[{\texorpdfstring{disk\+\_\+ioctl(\+B\+Y\+T\+E drv, B\+Y\+T\+E cmd, void $\ast$buff)}{disk_ioctl(BYTE drv, BYTE cmd, void *buff)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf D\+R\+E\+S\+U\+LT} disk\+\_\+ioctl (
\begin{DoxyParamCaption}
\item[{B\+Y\+TE}]{drv, }
\item[{B\+Y\+TE}]{cmd, }
\item[{void $\ast$}]{buff}
\end{DoxyParamCaption}
)}\hypertarget{diskio_8h_ac822cf3c1768a2c35e4858cc99b8f53b}{}\label{diskio_8h_ac822cf3c1768a2c35e4858cc99b8f53b}


Miscellaneous drive controls. 


\begin{DoxyParams}{Parameters}
{\em drv} & Physical drive number (0) \\
\hline
{\em cmd} & Control command code \\
\hline
{\em buff} & Pointer to the control data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
status (see D\+R\+E\+S\+U\+LT) 
\end{DoxyReturn}
\index{diskio.\+h@{diskio.\+h}!disk\+\_\+read@{disk\+\_\+read}}
\index{disk\+\_\+read@{disk\+\_\+read}!diskio.\+h@{diskio.\+h}}
\subsubsection[{\texorpdfstring{disk\+\_\+read(\+B\+Y\+T\+E drv, B\+Y\+T\+E $\ast$buff, D\+W\+O\+R\+D sector, U\+I\+N\+T count)}{disk_read(BYTE drv, BYTE *buff, DWORD sector, UINT count)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf D\+R\+E\+S\+U\+LT} disk\+\_\+read (
\begin{DoxyParamCaption}
\item[{B\+Y\+TE}]{drv, }
\item[{B\+Y\+TE $\ast$}]{buff, }
\item[{D\+W\+O\+RD}]{sector, }
\item[{U\+I\+NT}]{count}
\end{DoxyParamCaption}
)}\hypertarget{diskio_8h_a99e229031022d13ac273b6ea78af49cd}{}\label{diskio_8h_a99e229031022d13ac273b6ea78af49cd}


Read sector(s) 


\begin{DoxyParams}{Parameters}
{\em drv} & Physical drive number (0) \\
\hline
{\em buff} & Pointer to the data buffer to store read data \\
\hline
{\em sector} & Start sector number (L\+BA) \\
\hline
{\em count} & Number of sectors to read (1..128) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
status (see D\+R\+E\+S\+U\+LT) 
\end{DoxyReturn}
\index{diskio.\+h@{diskio.\+h}!disk\+\_\+status@{disk\+\_\+status}}
\index{disk\+\_\+status@{disk\+\_\+status}!diskio.\+h@{diskio.\+h}}
\subsubsection[{\texorpdfstring{disk\+\_\+status(\+B\+Y\+T\+E drv)}{disk_status(BYTE drv)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf D\+S\+T\+A\+T\+US} disk\+\_\+status (
\begin{DoxyParamCaption}
\item[{B\+Y\+TE}]{drv}
\end{DoxyParamCaption}
)}\hypertarget{diskio_8h_a21ad8e9a107ea2000705a3edfebaaa2d}{}\label{diskio_8h_a21ad8e9a107ea2000705a3edfebaaa2d}


Get disk status. 


\begin{DoxyParams}{Parameters}
{\em drv} & Physical drive number, which must be 0 \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
status (see D\+S\+T\+A\+T\+US) 
\end{DoxyReturn}
\index{diskio.\+h@{diskio.\+h}!disk\+\_\+write@{disk\+\_\+write}}
\index{disk\+\_\+write@{disk\+\_\+write}!diskio.\+h@{diskio.\+h}}
\subsubsection[{\texorpdfstring{disk\+\_\+write(\+B\+Y\+T\+E drv, const B\+Y\+T\+E $\ast$buff, D\+W\+O\+R\+D sector, U\+I\+N\+T count)}{disk_write(BYTE drv, const BYTE *buff, DWORD sector, UINT count)}}]{\setlength{\rightskip}{0pt plus 5cm}{\bf D\+R\+E\+S\+U\+LT} disk\+\_\+write (
\begin{DoxyParamCaption}
\item[{B\+Y\+TE}]{drv, }
\item[{const B\+Y\+TE $\ast$}]{buff, }
\item[{D\+W\+O\+RD}]{sector, }
\item[{U\+I\+NT}]{count}
\end{DoxyParamCaption}
)}\hypertarget{diskio_8h_ac03220b2c8a090b4f76eb2c9407b84fb}{}\label{diskio_8h_ac03220b2c8a090b4f76eb2c9407b84fb}


Write sector(s) 


\begin{DoxyParams}{Parameters}
{\em drv} & Physical drive number (0) \\
\hline
{\em buff} & Pointer to the data buffer to write to disk \\
\hline
{\em sector} & Start sector number (L\+BA) \\
\hline
{\em count} & Number of sectors to write (1..128) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
status (see D\+R\+E\+S\+U\+LT) 
\end{DoxyReturn}
